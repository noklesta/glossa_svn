
** Introduction

A Glossa installation consists of four elements:
- external programs and libraries: (CWB, Text::NSP, etc)
- cgiRoot: a directory for the cgi programs
- htmlRoot: a directory for the php, javascript and image files
- dataRoot: a "data directory" for configuration files, files stored by
  the users and various miscellaneous files

In addition, Glossa comes with some utility programs to 
encode corpora etc. But these are not strictly necessary.

** Install external programs and libraries

* CWB

Install CWB package.
ftp://ftp.ims.uni-stuttgart.de/pub/outgoing/cwb-beta/index.html

Install perl modules

Copy extern/Query_dev.pm to the directory where Query.pm is found.

* Text::NSP

Perl v5.8.5 required--this is only v5.8.0, stopped at Makefile.PL line 1.

Patched versions of necessary files are found under $GLOSSADIR/extern
|The other files found in external can be used to ...
In bin/statistic.pl (and some pm-files) contains hard links.

* Misc modules

DBI
Spreadsheet/WriteExcel
GD::Graph
|GD-2.35
|GDTextUtil-0.86 (needed to get GD/Text/Align.pm)

 
* MySQL

This is probably installed on your system. If not, refer to www.mysql.com

You can also use a mysql installation on another machine; this is specified during
configuration.


** Install Glossa

* cgi programs

Copy the files in $GLOSSADIR/cgi-bin to a cgi-enabled folder. For exampel:

cp $GLOSSADIR/cgi-bin/* $HTTPDIR/cgi-bin/glossa/

Remember that these files need to be executable. 

You may have to adjust the "shebang" line in the start of each script 
to point to your perl executable.

If you want the cgi-programs to access perl modules outside the default 
system directories, you must edit the "use lib"-line at the start of each 

program. This is useful if you don't have access to a root account. 
|Remember to do it in ALL cgi-programs.


* PM file

Glossa.pm
 
 # read configuration file
 my $conf_file = "/hom/larsnyg/glossa-0.7/dat/" . $corpus . "/cgi.conf";


* Html and Javascript

cp -R html/* $HTTPDIR/glossa/

In the file html/glossa_text.inc, change the value to the directory of your data files:

  <input name="query_root" type="hidden" value="/home/httpd/html/glossa/dat/"></input>


* Data files

Files in $GLOSSADIR/dat/ are configuration files. They need to be kept in a directory that the httpd user has access to, but it does not need to be accessible via http (i.e. not in the directories from which the http server will display files to the public).

The directories dat/test/hits and dat/test/subcorp also need to be writable by the httpd user.

* CWB files

|Remember to put the reg file for the test-korpus reg/test into the delivery-package!

$GLOSSADIR/reg and $GLOSSADIR/cwb_dat must also be accesible by the http user. If you already have directories for CWB registry and CWB data, these files should probably go there. But the CWB registry used by Glossa for each corpus is specified in the configuration files, and the directory for CWB data is specified in the CWB registry file (this must be edited to point to the appropriate directory).  

The database must be created, named, for instance "glossa". 
|Use the sql-script dat/test/db.sql to create the tabels in the database: 

|mysql> source db.sql;

You can then run the 

** Minimal configuration

There are many ways to change Glossa by changing configuration files. The minimum, however, to get the test corpus running is:

- change the htmlRoot and cgiRoot variables in html/index_dev.php
- change the htmlRoot and cgiRoot variables in js/test.conf.js
- edit the dat/test/cgi.conf file. The following entries should probably be changed:

 # username, password and database name for the database
 db_pwd = 
 db_name = 
 db_uname = 
 db_host = 

 # urls
 htmlRoot = http://corp.hum.sdu.dk/glossa/
 cgiRoot = http://corp.hum.sdu.dk/cgi-bin/glossa/
 download_url = http://corp.hum.sdu.dk/glossa/download/

 # various directories
 logfile = /tmp/glossalog
 cwb_registry = /home/larsnyg/reg/
 tmp_dir = /tmp/
 dat_files = /home/httpd/html/glossa/download/
 config_dir = /home/httpd/html/glossa/dat/
 subcorp_files = /home/httpd/html/glossa/dat/test/subcorp/
 hits_files = /home/httpd/html/glossa/dat/test/hits/



** Test installation:

http://my.server/glossa/html/index_dev.php?corpus=test


|Hints 
|If you get "searching ......." in an endless loop when trying to do a search in |the corpus, then the cwb_registry path in dat/test/cgi.conf might be wrong.

|Don¡Çt use Netscape/7.2 or older, if you do the web-interface will lack ||functionallity.


|Miscellaneous
|I have copied one file to get rid of an error message in the web-server log |file:
|cp ./js/dommenu-0.3.5/examples/arrow.gif ./html/arrow.gif
|I don¡Çt know if it is necessary at all?

|The doc/GLOSSA_manual.pdf "GLOSSA -The Corpus Explorer" are missing the figures.


